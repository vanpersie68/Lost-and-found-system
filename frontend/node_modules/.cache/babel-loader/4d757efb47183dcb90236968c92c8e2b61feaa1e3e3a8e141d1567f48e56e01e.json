{"ast":null,"code":"import { regist, drawCodeImage, initCaptcha } from \"@/api/index\";\nimport { validateMobile, validatePassword } from \"@/libs/validate\";\nexport default {\n  components: {},\n  data() {\n    return {\n      captchaId: \"\",\n      captchaImg: \"\",\n      error: false,\n      loading: false,\n      errorCode: \"\",\n      form: {\n        username: \"\",\n        password: \"\",\n        mobile: \"\",\n        code: \"\",\n        captchaId: \"\"\n      },\n      rules: {\n        username: [{\n          required: true,\n          message: \"Please enter your mobile number\",\n          trigger: \"blur\"\n        }, {\n          validator: validateMobile,\n          trigger: \"blur\"\n        }],\n        nickname: [{\n          required: true,\n          message: \"Please enter your name\",\n          trigger: \"blur\"\n        }],\n        password: [{\n          required: true,\n          message: \"Please enter your login password\",\n          trigger: \"blur\"\n        }, {\n          validator: validatePassword,\n          trigger: \"blur\"\n        }]\n      }\n    };\n  },\n  methods: {\n    getCaptchaImg() {\n      this.loadingCaptcha = true;\n      initCaptcha().then(res => {\n        this.loadingCaptcha = false;\n        if (res.success) {\n          this.captchaId = res.result;\n          this.captchaImg = drawCodeImage + this.captchaId;\n        }\n      });\n    },\n    submitRegist() {\n      this.form.captchaId = this.captchaId;\n      this.form.mobile = this.form.username;\n      this.$refs.usernameLoginForm.validate(valid => {\n        if (valid) {\n          if (!this.form.code) {\n            this.errorCode = \"Verification code cannot be empty\";\n            return;\n          } else {\n            this.errorCode = \"\";\n          }\n          this.loading = true;\n          regist(this.form).then(res => {\n            this.loading = false;\n            if (res.success) {\n              this.$router.push({\n                name: \"login\"\n              });\n            }\n          });\n        }\n      });\n    }\n  },\n  mounted() {\n    this.getCaptchaImg();\n  }\n};","map":{"version":3,"names":["regist","drawCodeImage","initCaptcha","validateMobile","validatePassword","components","data","captchaId","captchaImg","error","loading","errorCode","form","username","password","mobile","code","rules","required","message","trigger","validator","nickname","methods","getCaptchaImg","loadingCaptcha","then","res","success","result","submitRegist","$refs","usernameLoginForm","validate","valid","$router","push","name","mounted"],"sources":["src/views/regist.vue"],"sourcesContent":["<template>\n    <div class=\"login\">\n      <Row justify=\"center\" align=\"middle\" @keydown.enter.native=\"submitRegist\" style=\"height:100%\">\n        <div class=\"loginUp\">\n          <div class=\"loginLeft\">\n            <img src=\"../assets/login/logo.png\" alt=\"\" srcset=\"\" />\n            <span class=\"line\"></span>\n            <span class=\"title\">Campus Lost and Found Management System</span>\n          </div>\n        </div>\n        <div class=\"loginMiddle\">\n          <div class=\"login-background\">\n            <div class=\"loginBg\"></div>\n            <div class=\"loginRight\">\n              <Row v-if=\"!socialLogining\" class=\"loginRow\">\n                <Form ref=\"usernameLoginForm\" :model=\"form\" :rules=\"rules\" class=\"form\" style=\"width:100%\">\n                  <FormItem prop=\"username\" class=\"loginInput\">\n                    <Row>\n                      <Input v-model=\"form.username\" size=\"large\" clearable placeholder=\"Your mobile number\" autocomplete=\"off\">\n                        <Icon class=\"iconfont icon-user\" slot=\"prefix\" style=\"line-height:50px\" />\n                      </Input>\n                    </Row>\n                  </FormItem>\n                  <FormItem prop=\"nickname\" class=\"loginInput\">\n                    <Row>\n                      <Input v-model=\"form.nickname\" size=\"large\" clearable placeholder=\"Your name\" autocomplete=\"off\">\n                        <Icon class=\"iconfont icon-user\" slot=\"prefix\" style=\"line-height:50px\" />\n                      </Input>\n                    </Row>\n                  </FormItem>\n                  <FormItem prop=\"password\">\n                    <Input style=\"height:50px;line-height:50px\" type=\"password\" v-model=\"form.password\" size=\"large\" placeholder=\"Your password\" password autocomplete=\"off\">\n                      <Icon class=\"iconfont icon-lock\" slot=\"prefix\" style=\"line-height:50px\" />\n                    </Input>\n                  </FormItem>\n                  <FormItem prop=\"code\">\n                    <Row type=\"flex\" justify=\"space-between\" style=\"align-items: center;overflow: hidden;\">\n                      <Col span=\"16\">\n                        <Input v-model=\"form.code\" size=\"large\" clearable placeholder=\"Enter the image code\" style=\"width:90%\" :maxlength=\"10\" class=\"input-verify\" />\n                      </Col>\n                      <Col span=\"8\">\n                        <div class=\"code-image\" style=\"position:relative;font-size:12px;width:100%\">\n                          <Spin v-if=\"loadingCaptcha\" fix></Spin>\n                          <img :src=\"captchaImg\" @click=\"getCaptchaImg\" alt=\"Failed to load the code\" style=\"width:110px;cursor:pointer;display:block\" />\n                        </div>\n                      </Col>\n                    </Row>\n                  </FormItem>\n                </Form>\n                <Row>\n                  <Button class=\"login-btn\" type=\"primary\" size=\"large\" :loading=\"loading\" @click=\"submitRegist\" long>\n                    <span v-if=\"!loading\" style=\"letter-spacing:20px; font-weight:bold\">Register</span>\n                    <span v-else>Registering</span>\n                  </Button>\n                </Row>\n                <Row>\n                  <router-link to=\"/login\">\n                    <Button class=\"login-btn\" type=\"primary\" size=\"large\" long>Back to Login</Button>\n                  </router-link>\n                </Row>\n              </Row>\n              <p class=\"loginBottom\">\n                ART YOUR DREAM\n              </p>\n              <div v-if=\"socialLogining\">\n                <RectLoading />\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"loginDown\">\n          <p style=\"margin-top:10px\">Help | Privacy | Terms</p>\n          <p>\n            <span>Copyright © 2020 - Present XXX All rights reserved</span>\n            <span style=\"display:inline-block; width:4px;height:6px\"></span>\n            <a target=\"_blank\" href=\"https://beian.miit.gov.cn\" style=\"color:#848585\">ICP Record Zhejiang ICP XXXXXXXXXXX号</a>\n            <a target=\"_blank\" href=\"http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=XXXXXXXXXXXXXX号\">\n              <img src=\"../assets/login/gonganlogo.png\" style=\"margin-left:6px\" />\n              <p style=\"display:inline-block;color:#848585\">Zhejiang Public Network Security XXXXXXXXXXXXXX号</p>\n            </a>\n          </p>\n        </div>\n      </Row>\n    </div>\n  </template>\n  \n  <script>\n  import {\n    regist,\n    drawCodeImage,\n    initCaptcha\n  } from \"@/api/index\";\n  import {\n    validateMobile,\n    validatePassword\n  } from \"@/libs/validate\";\n  export default {\n    components: {},\n    data() {\n      return {\n        captchaId: \"\",\n        captchaImg: \"\",\n        error: false,\n        loading: false,\n        errorCode: \"\",\n        form: {\n          username: \"\",\n          password: \"\",\n          mobile: \"\",\n          code: \"\",\n          captchaId: \"\"\n        },\n        rules: {\n          username: [{\n              required: true,\n              message: \"Please enter your mobile number\",\n              trigger: \"blur\"\n            },\n            {\n              validator: validateMobile,\n              trigger: \"blur\"\n            }\n          ],\n          nickname: [{\n            required: true,\n            message: \"Please enter your name\",\n            trigger: \"blur\"\n          }],\n          password: [{\n              required: true,\n              message: \"Please enter your login password\",\n              trigger: \"blur\"\n            },\n            {\n              validator: validatePassword,\n              trigger: \"blur\"\n            }\n          ]\n        }\n      };\n    },\n    methods: {\n      getCaptchaImg() {\n        this.loadingCaptcha = true;\n        initCaptcha().then(res => {\n          this.loadingCaptcha = false;\n          if (res.success) {\n            this.captchaId = res.result;\n            this.captchaImg = drawCodeImage + this.captchaId;\n          }\n        });\n      },\n      submitRegist() {\n        this.form.captchaId = this.captchaId;\n        this.form.mobile = this.form.username;\n        this.$refs.usernameLoginForm.validate(valid => {\n          if (valid) {\n            if (!this.form.code) {\n              this.errorCode = \"Verification code cannot be empty\";\n              return;\n            } else {\n              this.errorCode = \"\";\n            }\n            this.loading = true;\n            regist(this.form).then(res => {\n              this.loading = false;\n              if (res.success) {\n                this.$router.push({\n                  name: \"login\"\n                });\n              } \n            });\n          }\n        });\n      }\n    },\n    mounted() {\n      this.getCaptchaImg();\n    }\n  };\n  </script>\n  \n  <style lang=\"less\">\n  html,body{\n    background: #ffffff !important;\n    font-family: Microsoft YaHei;\n    font-weight: 400;;\n  }\n  a{   \n    font-family: Microsoft YaHei;\n    color: #77C8C6;\n  }\n  input::-webkit-input-placeholder {\n    font-size: 14px;\n  }\n  .ivu-checkbox-wrapper.ivu-checkbox-large{\n    font-size: 14px;\n  }\n  a:hover{\n    font-family: Microsoft YaHei;\n    color: #77C8C6;\n  }\n  .login {\n    height: 100%;\n    background-color: #ffffff;\n  \n    .ivu-tabs-nav-container {\n      line-height: 2;\n      font-size: 17px;\n      box-sizing: border-box;\n      white-space: nowrap;\n      overflow: hidden;\n      position: relative;\n      zoom: 1;\n    }\n  \n    // loginUp login logo\n    .loginUp{\n      width: 1200px;\n      min-height: 80px;\n      background-color:#ffffff;\n      margin: 0 auto;\n      overflow: hidden;\n    }\n    .loginLeft{\n      margin-top: 20px;\n      height: 50px;\n      display: flex;\n    }\n    .line{\n      display: inline-block;\n      width: 2px;\n      height: 25px;\n      background: url(../assets/login/line.png);\n      margin: 0px 10px;\n      margin-top: 15px;\n    }\n    .title{\n      line-height: 58px; \n      font-size: 18px;\n      font-family: Microsoft YaHei;\n      font-weight: 500;\n      color: #999999;\n    }\n    .loginMiddle{\n      width: 100%;\n      height: 780px;\n      margin: 0 auto; \n      background-color: #6a6ad2;\n      overflow: hidden;\n      // background: linear-gradient(45deg, rgba(2, 173, 168, 0.17), rgba(0, 221, 215, 0.17)); \n    }     \n    .login-background{\n      width: 1200px;\n      height: 780px;\n      margin: 0 auto;   \n      display: flex;\n      justify-content: space-between;\n    }\n    .loginBg{\n      width: 560px;\n      height: 684px;\n      margin-top: -20px;\n      background-image: url(../assets/login/star.png);\n      background-repeat: no-repeat;\n      background-position: left bottom;\n    }\n    .loginRight{\n      width: 450px;\n      height: 550px;\n      background-color: #ffffff;\n      border: 1px solid #E6E6E6;\n      box-shadow: 0px 2px 15px 1px rgba(0, 0, 0, 0.1);\n      border-radius: 5px;\n      margin-top: 115px;\n      position: relative;\n    }\n    .loginRow{\n      padding: 0px 30px;\n    }\n    .loginDown{\n      width: 1200px;\n      height: auto;\n      margin: 0 auto;\n  \n    }\n    .loginTab{\n      margin-top: 20px;\n    }\n    .ivu-tabs-tab{\n      color: #333333;     \n      font-size: 18px;\n      font-family: Microsoft YaHei;\n      font-weight: bold;\n    }\n    .ivu-tabs-nav .ivu-tabs-tab{\n      padding: 8px 42px;\n      margin-right: 0px;\n    }\n    .ivu-tabs-ink-bar{\n      height: 4px;\n      width: 86px !important;\n      border-radius: 2px;\n      margin: 0px 42px;\n      background-color: #6a6ad2;\n    }\n    .ivu-tabs-nav .ivu-tabs-tab-active,.ivu-tabs-nav .ivu-tabs-tab:hover{\n      color: #333333;   \n    }\n    .loginInput{\n      font-size: 18px;    \n      font-family: Microsoft YaHei;\n      font-weight: bold;\n      color: #333333;\n    }\n  \n    .ivu-tabs-bar{\n      border-bottom: 0px;\n    }\n    .login-btn{\n      width: 390px;\n      height: 50px;\n      background: radial-gradient(circle, #77C8C6, #50C7C4);\n      border: 2px solid #61C8C5;\n      box-shadow: 0px 2px 6px 0px rgba(0, 0, 0, 0.21);\n      border-radius: 4px;\n    }\n    .login .login-btn, .login .other-login{\n      margin-top: 40px;\n    }\n    .loginBottom{\n      width: 448px;\n      height: 60px;      \n      background: #f9f9f9;\n      border-radius: 0px 0px 5px 5px;\n      padding: 0px;\n      position: absolute;\n      bottom: 0px;  \n      font-size: 16px;\n      font-weight: bold;\n      color: #6a6ad2;\n      text-align: center;\n      line-height: 60px;\n    }\n    .loginDown p{\n      text-align: center;       \n      font-size: 12px;\n      font-family: Microsoft YaHei;\n      color: #777777;\n      line-height: 22px;\n    }\n    .ivu-checkbox-checked .ivu-checkbox-inner{\n      background-color: #6a6ad2;\n      border-color: #6a6ad2;\n    }\n    .ivu-form-item{\n      margin-bottom: 24px;\n    }\n    .ivu-input-wrapper-large .ivu-input-icon{\n      line-height: 50px;\n    }\n    .loginInput input:nth-of-type(1){\n      height: 50px;  \n      font-size: 18px;\n      font-weight: bold;\n      font-family: Microsoft YaHei;\n      color: #333333;\n      line-height: 50px;\n    }\n    .ivu-input-large{\n      height: 50px;  \n      color:#CFCFCF;\n      line-height: 50px;\n    }\n    .ivu-input-large{\n      font-size: 14px;\n    }\n    .ivu-btn-large{\n      height: 50px;\n    }\n    .form {\n      padding-top: 2vh;\n      .input-verify {\n        width: 67%;\n      }\n    }\n    .code-image {\n      .ivu-spin-fix .ivu-spin-main {\n        height: 20px;\n      }\n    }\n    .forget-pass,\n    .other-way {\n      font-size: 14px;\n    }\n    .login-btn,\n    .other-login {\n      margin-top: 40px;\n    }\n    .icons {\n      display: flex;\n      align-items: center;\n    }\n    .other-icon {\n      cursor: pointer;\n      margin-left: 10px;\n      display: flex;\n      align-items: center;\n      color: rgba(0, 0, 0, .2);\n  \n      :hover {\n        color: #2d8cf0;\n      }\n    }\n    .layout {\n      display: flex;\n      flex-direction: column;\n      justify-content: space-between;\n      width: 368px;\n      height: 100%;\n    }\n  }\n  </style>\n  "],"mappings":"AAuFA,SACAA,MAAA,EACAC,aAAA,EACAC,WAAA,QACA;AACA,SACAC,cAAA,EACAC,gBAAA,QACA;AACA;EACAC,UAAA;EACAC,KAAA;IACA;MACAC,SAAA;MACAC,UAAA;MACAC,KAAA;MACAC,OAAA;MACAC,SAAA;MACAC,IAAA;QACAC,QAAA;QACAC,QAAA;QACAC,MAAA;QACAC,IAAA;QACAT,SAAA;MACA;MACAU,KAAA;QACAJ,QAAA;UACAK,QAAA;UACAC,OAAA;UACAC,OAAA;QACA,GACA;UACAC,SAAA,EAAAlB,cAAA;UACAiB,OAAA;QACA,EACA;QACAE,QAAA;UACAJ,QAAA;UACAC,OAAA;UACAC,OAAA;QACA;QACAN,QAAA;UACAI,QAAA;UACAC,OAAA;UACAC,OAAA;QACA,GACA;UACAC,SAAA,EAAAjB,gBAAA;UACAgB,OAAA;QACA;MAEA;IACA;EACA;EACAG,OAAA;IACAC,cAAA;MACA,KAAAC,cAAA;MACAvB,WAAA,GAAAwB,IAAA,CAAAC,GAAA;QACA,KAAAF,cAAA;QACA,IAAAE,GAAA,CAAAC,OAAA;UACA,KAAArB,SAAA,GAAAoB,GAAA,CAAAE,MAAA;UACA,KAAArB,UAAA,GAAAP,aAAA,QAAAM,SAAA;QACA;MACA;IACA;IACAuB,aAAA;MACA,KAAAlB,IAAA,CAAAL,SAAA,QAAAA,SAAA;MACA,KAAAK,IAAA,CAAAG,MAAA,QAAAH,IAAA,CAAAC,QAAA;MACA,KAAAkB,KAAA,CAAAC,iBAAA,CAAAC,QAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UACA,UAAAtB,IAAA,CAAAI,IAAA;YACA,KAAAL,SAAA;YACA;UACA;YACA,KAAAA,SAAA;UACA;UACA,KAAAD,OAAA;UACAV,MAAA,MAAAY,IAAA,EAAAc,IAAA,CAAAC,GAAA;YACA,KAAAjB,OAAA;YACA,IAAAiB,GAAA,CAAAC,OAAA;cACA,KAAAO,OAAA,CAAAC,IAAA;gBACAC,IAAA;cACA;YACA;UACA;QACA;MACA;IACA;EACA;EACAC,QAAA;IACA,KAAAd,aAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}