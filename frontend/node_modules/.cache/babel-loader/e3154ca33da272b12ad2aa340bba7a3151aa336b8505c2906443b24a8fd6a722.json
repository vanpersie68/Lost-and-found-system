{"ast":null,"code":"import axios from \"axios\";\nimport { getMenuList } from \"@/api/index\";\nexport default {\n  name: \"search\",\n  props: {\n    theme: {\n      type: String,\n      default: \"darkblue\"\n    },\n    type: {\n      type: String,\n      default: \"input\"\n    }\n  },\n  data() {\n    return {\n      key: \"\",\n      list: []\n    };\n  },\n  computed: {},\n  methods: {\n    init() {\n      let menuData = this.getStore(\"menuData\");\n      if (!menuData) {\n        // 第一次加载 读取数据\n        let accessToken = this.getStore(\"accessToken\");\n        // 加载菜单\n        axios.get(getMenuList, {\n          headers: {\n            accessToken: accessToken\n          }\n        }).then(res => {\n          menuData = res.result;\n          this.list = this.getList(menuData);\n        });\n      } else {\n        menuData = JSON.parse(menuData);\n        this.list = this.getList(menuData);\n      }\n    },\n    getList(menuData) {\n      let list = [];\n      menuData.forEach(function (e) {\n        if (e.children && e.children.length > 0) {\n          // 1\n          e.children.forEach(function (c) {\n            if (c.children && c.children.length > 0) {\n              // 2\n              c.children.forEach(function (b) {\n                list.push({\n                  title: b.title,\n                  name: b.name\n                });\n              });\n            }\n          });\n        }\n      });\n      return list;\n    },\n    changeMenu(name111) {\n      if (!name111) {\n        return;\n      }\n      this.$emit(\"changeOk\", name111);\n    },\n    clear() {\n      this.$refs.select.clearSingleSelect();\n    }\n  },\n  mounted() {\n    this.init();\n  }\n};","map":{"version":3,"names":["axios","getMenuList","name","props","theme","type","String","default","data","key","list","computed","methods","init","menuData","getStore","accessToken","get","headers","then","res","result","getList","JSON","parse","forEach","e","children","length","c","b","push","title","changeMenu","name111","$emit","clear","$refs","select","clearSingleSelect","mounted"],"sources":["src/views/home/search.vue"],"sourcesContent":["<template>\n<div style=\"position: fixed;\">\n    <div :class=\"`search-menu search-menu-theme-${theme}`\" v-if=\"type == 'input'\">\n        <Select v-model=\"key\" prefix=\"ios-search\" transfer clearable filterable placeholder=\"Please select the module to add\" @on-change=\"changeMenu\" ref=\"select\">\n            <Option v-for=\"(item, index) in list\" :value=\"item\" :key=\"index\">{{\n          item.title\n        }}</Option>\n        </Select>\n        <Icon v-show=\"key\" type=\"ios-close-circle\" class=\"close-icon\" @click=\"clear\" style=\"margin-left: 15px;\" />\n    </div>\n    <div class=\"search-dropdown\" v-else>\n        <Dropdown trigger=\"click\" placement=\"bottom-start\">\n            <div style=\"display: inline-block\">\n                <div class=\"header-right-icon header-action\">\n                    <Icon type=\"ios-search\" :size=\"20\" style=\"margin-left: 15px;\" />\n                </div>\n            </div>\n            <div slot=\"list\" class=\"search-select\">\n                <Select v-model=\"key\" prefix=\"ios-search\" transfer clearable filterable placeholder=\"OA manu search\" @on-change=\"changeMenu\" ref=\"select\">\n                    <Option v-for=\"(item, index) in list\" :value=\"item\" :key=\"index\">{{ item.title }}</Option>\n                </Select>\n            </div>\n        </Dropdown>\n    </div>\n</div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport {\n    getMenuList\n} from \"@/api/index\";\nexport default {\n    name: \"search\",\n    props: {\n        theme: {\n            type: String,\n            default: \"darkblue\",\n        },\n        type: {\n            type: String,\n            default: \"input\",\n        },\n    },\n    data() {\n        return {\n            key: \"\",\n            list: [],\n        };\n    },\n    computed: {},\n    methods: {\n        init() {\n            let menuData = this.getStore(\"menuData\");\n            if (!menuData) {\n                // 第一次加载 读取数据\n                let accessToken = this.getStore(\"accessToken\");\n                // 加载菜单\n                axios\n                    .get(getMenuList, {\n                        headers: {\n                            accessToken: accessToken\n                        }\n                    })\n                    .then((res) => {\n                        menuData = res.result;\n                        this.list = this.getList(menuData);\n                    });\n            } else {\n                menuData = JSON.parse(menuData);\n                this.list = this.getList(menuData);\n            }\n        },\n        getList(menuData) {\n            let list = [];\n            menuData.forEach(function (e) {\n                if (e.children && e.children.length > 0) {\n                    // 1\n                    e.children.forEach(function (c) {\n                        if (c.children && c.children.length > 0) {\n                            // 2\n                            c.children.forEach(function (b) {\n                                list.push({\n                                    title: b.title,\n                                    name: b.name,\n                                });\n                            });\n                        }\n                    });\n                }\n            });\n            return list;\n        },\n        changeMenu(name111) {\n            if (!name111) {\n                return;\n            }\n            this.$emit(\"changeOk\", name111);\n        },\n        clear() {\n            this.$refs.select.clearSingleSelect();\n        },\n    },\n    mounted() {\n        this.init();\n    },\n};\n</script>\n\n<style lang=\"less\">\n.search-menu {\n    position: relative;\n    display: flex;\n    height: 60px;\n    align-items: center;\n    width: 200px;\n\n    .ivu-icon {\n        font-size: 20px;\n    }\n\n    .close-icon {\n        display: none;\n        position: absolute;\n        font-size: 14px;\n        color: #808695;\n        right: 8px;\n        cursor: pointer;\n    }\n\n    &:hover {\n        .close-icon {\n            display: block;\n        }\n    }\n\n    .ivu-select-selection {\n        border: none;\n        border-color: none;\n        outline: 0;\n        box-shadow: none;\n        height: 60px;\n    }\n\n    .ivu-select-head-flex {\n        height: 60px;\n    }\n\n    .ivu-select-arrow {\n        display: none;\n    }\n\n    .ivu-select-selection-focused .ivu-select-arrow,\n    .ivu-select-selection:hover .ivu-select-arrow {\n        display: none;\n    }\n\n    input::-webkit-input-placeholder {\n        color: #999;\n    }\n\n    input::-moz-placeholder {\n        color: #999;\n    }\n\n    input::-ms-input-placeholder {\n        color: #999;\n    }\n}\n\n.search-menu-theme-darkblue {\n    .ivu-icon {\n        color: hsla(0, 0%, 100%, 0.65);\n    }\n\n    .ivu-select-selection {\n        background: #17233d;\n    }\n\n    .ivu-select-input {\n        color: hsla(0, 0%, 100%, 0.65);\n    }\n\n    input::-webkit-input-placeholder {\n        color: #707786;\n    }\n\n    input::-moz-placeholder {\n        color: #707786;\n    }\n\n    input::-ms-input-placeholder {\n        color: #707786;\n    }\n}\n\n.search-menu-theme-primary {\n    .ivu-icon {\n        color: #fff;\n    }\n\n    .ivu-select-selection {\n        background: #2d8cf0;\n    }\n\n    .ivu-select-input {\n        color: #fff;\n    }\n\n    input::-webkit-input-placeholder {\n        color: rgb(233, 233, 233);\n    }\n\n    input::-moz-placeholder {\n        color: rgb(233, 233, 233);\n    }\n\n    input::-ms-input-placeholder {\n        color: rgb(233, 233, 233);\n    }\n}\n\n.search-menu-theme-black {\n    .ivu-icon {\n        color: hsla(0, 0%, 100%, 0.65);\n    }\n\n    .ivu-select-selection {\n        background: #1f1f1f;\n    }\n\n    .ivu-select-input {\n        color: hsla(0, 0%, 100%, 0.65);\n    }\n\n    input::-webkit-input-placeholder {\n        color: #707786;\n    }\n\n    input::-moz-placeholder {\n        color: #707786;\n    }\n\n    input::-ms-input-placeholder {\n        color: #707786;\n    }\n}\n\n.search-dropdown {\n    .ivu-select-dropdown {\n        padding: 8px 16px;\n    }\n\n    .search-select {\n        width: 265px;\n    }\n}\n</style>\n"],"mappings":"AA4BA,OAAAA,KAAA;AACA,SACAC,WAAA,QACA;AACA;EACAC,IAAA;EACAC,KAAA;IACAC,KAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,OAAA;IACA;IACAF,IAAA;MACAA,IAAA,EAAAC,MAAA;MACAC,OAAA;IACA;EACA;EACAC,KAAA;IACA;MACAC,GAAA;MACAC,IAAA;IACA;EACA;EACAC,QAAA;EACAC,OAAA;IACAC,KAAA;MACA,IAAAC,QAAA,QAAAC,QAAA;MACA,KAAAD,QAAA;QACA;QACA,IAAAE,WAAA,QAAAD,QAAA;QACA;QACAf,KAAA,CACAiB,GAAA,CAAAhB,WAAA;UACAiB,OAAA;YACAF,WAAA,EAAAA;UACA;QACA,GACAG,IAAA,CAAAC,GAAA;UACAN,QAAA,GAAAM,GAAA,CAAAC,MAAA;UACA,KAAAX,IAAA,QAAAY,OAAA,CAAAR,QAAA;QACA;MACA;QACAA,QAAA,GAAAS,IAAA,CAAAC,KAAA,CAAAV,QAAA;QACA,KAAAJ,IAAA,QAAAY,OAAA,CAAAR,QAAA;MACA;IACA;IACAQ,QAAAR,QAAA;MACA,IAAAJ,IAAA;MACAI,QAAA,CAAAW,OAAA,WAAAC,CAAA;QACA,IAAAA,CAAA,CAAAC,QAAA,IAAAD,CAAA,CAAAC,QAAA,CAAAC,MAAA;UACA;UACAF,CAAA,CAAAC,QAAA,CAAAF,OAAA,WAAAI,CAAA;YACA,IAAAA,CAAA,CAAAF,QAAA,IAAAE,CAAA,CAAAF,QAAA,CAAAC,MAAA;cACA;cACAC,CAAA,CAAAF,QAAA,CAAAF,OAAA,WAAAK,CAAA;gBACApB,IAAA,CAAAqB,IAAA;kBACAC,KAAA,EAAAF,CAAA,CAAAE,KAAA;kBACA9B,IAAA,EAAA4B,CAAA,CAAA5B;gBACA;cACA;YACA;UACA;QACA;MACA;MACA,OAAAQ,IAAA;IACA;IACAuB,WAAAC,OAAA;MACA,KAAAA,OAAA;QACA;MACA;MACA,KAAAC,KAAA,aAAAD,OAAA;IACA;IACAE,MAAA;MACA,KAAAC,KAAA,CAAAC,MAAA,CAAAC,iBAAA;IACA;EACA;EACAC,QAAA;IACA,KAAA3B,IAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}